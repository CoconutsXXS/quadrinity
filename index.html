<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./home.css">
    <link rel="stylesheet" href="./blue.css">

    <!-- Titre -->
    <title>Quadrinity</title>
    <!-- Logo d'onglet -->
    <link rel="shortcut icon" href="./Logo/Medium.png">
</head>


<iframe src="https://discord.com/widget?id=1041036970115215470&theme=dark" id="discord-widget"  width="350" height="650" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"> </iframe> -->

<body>
    <section id="intro-paragraphe">
        <div>
            <h1><strong>Quadrinity</strong></h1>
            <h3>Bienvenue sur le site web officiel de Quadrinity ! Ici, tu peux gagner des avantages exclusifs et être au courent de toutes les nouveautés !</h3>
            <h2>Qu'est ce que Quadrinity ?</h2>
            <h3>Quadrinity est un serveur Discord divisé en 4 clans. Chaque membre appartient à un clan dont il doit défendre le territoire ! Pour conquérir ou défendre les régions, il faut des gouttes fossilisés (une monnaie magique qui se mesure en Watts) pour acheter des armes, des monstres et des items de personnalisation pour se rendre unique ! Pour gagner de l'argent, il faut faires des travaux, ce sont de noubreux mini-jeux divers et variés.</h3>
        </div>
    </section>
</body>

<body>
    <div id='menue'>
        <img src="./Logo/DiscordLogo.png" id="logo">
        <button onclick="window.location.href='file:///Users/Axel/Desktop/Quadrinity%20Manager/Quadrinity/Web/home.html';" class="favorite styled" style="left:  2%;" type="button" id="goButton">Accueil</button>
        <button onclick="window.location.href='file:///Users/Axel/Desktop/Quadrinity Manager/Quadrinity/Web/news.html';" class="favorite styled" style="left:  22%;" type="button" id="goButton">News</button>
        <button class="favorite styled" style="left: 44%;" type="button" id="goButton">Wumpus</button>
        <button class="favorite styled" style="right:  22%;" type="button" id="goButton">Blog</button>
        <button class="favorite styled" style="right:  2%;" type="button" id="goButton">Blog</button>

        <button class="favorite connect" type="button" id="name-connect">Coconuts XXS</button>
        <button href="your-oauth2-URL-here" class="favorite connect" type="button" id="connect"></button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() 
        {
            const menu = document.getElementById("menue");
            const connect = document.getElementById("connect");
            const connectName = document.getElementById("name-connect");
            window.addEventListener("scroll", function() 
            {
                if (window.scrollY > 110) {
                    menu.style.position = "fixed";
                    menu.style.top = "-115px";
                    menu.style.width = "100%";
                } else {
                    menu.style.position = "absolute";
                    menu.style.top = "0px";
                }
            });
            connect.addEventListener("mouseleave", function()
            {
                connectName.style.width = "100px";
                connectName.style.fontSize = "0px";
            });
            connect.addEventListener("mouseenter", function()
            {
                connectName.style.width = "500px";
                connectName.style.fontSize = "35px";
            });

            const express = require('express');
            const { port } = require('./config.json');

            const app = express();

            app.get('/', (request, response) => 
            {
                return response.sendFile('home.html', { root: '.' });
            });

            app.listen(port, () => console.log(`App listening at http://localhost:${port}`));

            window.onload = () => 
            {
                const fragment = new URLSearchParams(window.location.hash.slice(1));
                const [accessToken, tokenType] = [fragment.get('access_token'), fragment.get('token_type')];

                if(!accessToken) {return (connectName.innerText = '???'); }

                fetch('https://discord.com/api/users/@me', 
                {
                    headers: {
                        authorization: `${tokenType} ${accessToken}`,
                    },
                })
                .then(result => result.json())
                .then(response => 
                {
                    const { username, discriminator } = response;
                    connectName.innerText += ` ${username}#${discriminator}`;
                })
                .catch(console.error);
            };
        });
    </script>
</body>
</html>